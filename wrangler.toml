name = "hop"
main = "src/index.ts"
compatibility_date = "2024-12-11"

[build]
command = "bun build src/index.html --outdir dist --minify"

[observability]
enabled = true

[[routes]]
pattern = "hop.dunkirk.sh"
custom_domain = true

[[kv_namespaces]]
binding = "HOP"
id = "ae7cd39a622b466d876b8410d22d1397"

[[rules]]
type = "Text"
globs = ["**/*.html"]
fallthrough = false

[[vars]]
HOST = "https://hop.dunkirk.sh"
REDIRECT_BASE = "https://dunkirk.sh/h"
INDIKO_URL = "https://indiko.dunkirk.sh"

# Environment variables
# For local development, set in .dev.vars file
# For production, set as secrets:
# wrangler secret put HOST                 # e.g., https://hop.dunkirk.sh
# wrangler secret put REDIRECT_BASE        # e.g., https://dunkirk.sh (optional, defaults to HOST)
# wrangler secret put INDIKO_URL
# wrangler secret put INDIKO_CLIENT_ID
# wrangler secret put INDIKO_CLIENT_SECRET
# wrangler secret put API_KEY
